"use strict";(self.webpackChunkplatformatic_oss_website=self.webpackChunkplatformatic_oss_website||[]).push([[7297],{2950:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>l});var i=n(4848),o=n(8453);const a={},s="How to use ENV variables with Platformatic",r={id:"guides/use-env-with-platformatic",title:"How to use ENV variables with Platformatic",description:"{JSON.stringify({",source:"@site/docs/guides/use-env-with-platformatic.md",sourceDirName:"guides",slug:"/guides/use-env-with-platformatic",permalink:"/docs/next/guides/use-env-with-platformatic",draft:!1,unlisted:!1,editUrl:"https://github.com/platformatic/platformatic/edit/main/docs/guides/use-env-with-platformatic.md",tags:[],version:"current",frontMatter:{},sidebar:"Learn",previous:{title:"Configure JWT with Keycloak",permalink:"/docs/next/guides/jwt-keycloak"},next:{title:"Glossary",permalink:"/docs/next/learn/glossary"}},c={},l=[{value:"Introduction",id:"introduction",level:2},{value:"Setting up your Platformatic application",id:"setting-up-your-platformatic-application",level:2},{value:"Adding options to your Plugin",id:"adding-options-to-your-plugin",level:2},{value:"Add Options to <code>platformatic.json</code>",id:"add-options-to-platformaticjson",level:2},{value:"Conclusion",id:"conclusion",level:2}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components},{Head:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Head",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"how-to-use-env-variables-with-platformatic",children:"How to use ENV variables with Platformatic"})}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsx)("meta",{name:"description",content:"Learn how to use environment variables efficiently with Platformatic to manage different deployment settings."}),(0,i.jsx)("meta",{name:"keywords",content:"Platformatic, environment variables, configuration, software development, API"}),(0,i.jsx)("link",{rel:"preconnect",href:"https://example.com"}),(0,i.jsx)("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"Guide",headline:"How to Use Environment Variables with Platformatic",image:"../images/ENV_Var_Platforamtic.png",author:{"@type":"Person",name:"Fortune Ikechi"},publisher:{"@type":"Organization",name:"Platformatic",logo:{"@type":"ImageObject",url:"../images/ENV_Var_Platforamtic.png"}},datePublished:"2024-04-23",dateModified:"2024-05-02"})})]}),"\n",(0,i.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsxs)(t.p,{children:["Environment variables (env) are key-value pairs that can store data outside your application code. This can include details such as API keys, and ",(0,i.jsx)(t.a,{href:"https://12factor.net/config",children:"configuration"})," options, which are isolated from your source code."]}),"\n",(0,i.jsx)(t.p,{children:"This guide provides a step-by-step guide on adding and using environment variables (env) in a Platformatic application."}),"\n",(0,i.jsx)(t.h2,{id:"setting-up-your-platformatic-application",children:"Setting up your Platformatic application"}),"\n",(0,i.jsxs)(t.p,{children:["First, if you haven't already, you need to set up your Platformatic application. ",(0,i.jsx)(t.a,{href:"https://docs.platformatic.dev/docs/getting-started/quick-start-guide/",children:"Run the command below"}),", follow the steps, and initialize your application."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"npm create platformatic@latest\n"})}),"\n",(0,i.jsxs)(t.p,{children:["This will create a Platformatic project directory with all the files including ",(0,i.jsx)(t.code,{children:"platformatic.json"}),", where you will store your ",(0,i.jsx)(t.code,{children:"env"})," values."]}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"platformatic.json"})," file acts as the central configuration for your Platformatic application. Here, you define your database connection, server configurations, and how plugins should be loaded and configured with dynamic values from your environment variables. With this, your configurations can be easily changed without modifying your source code directly."]}),"\n",(0,i.jsx)(t.h2,{id:"adding-options-to-your-plugin",children:"Adding options to your Plugin"}),"\n",(0,i.jsxs)(t.p,{children:["In your Platformatic project, navigate to the ",(0,i.jsx)(t.a,{href:"https://fastify.dev/docs/latest/Reference/Plugins/",children:"Plugins"})," directory, and open the ",(0,i.jsx)(t.code,{children:"example.js"})," file in your code editor. This file will generally be your starting point for new plugins."]}),"\n",(0,i.jsxs)(t.p,{children:["Next, add ",(0,i.jsx)(t.a,{href:"https://fastify.dev/docs/latest/Reference/Plugins/#plugin-options",children:"options"})," to your Plugins. Below is an example options code for a plugin:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:"// plugins/greetingPlugin.js\n\nmodule.exports = async function (fastify, opts) {\n  // Use opts to access options passed during plugin registration\n  const { greeting, message } = opts;\n\n  fastify.decorate('greet', function() {\n    return `${greeting}! ${message}`;\n  });\n}\n"})}),"\n",(0,i.jsx)(t.p,{children:"In this plugin:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["We use ",(0,i.jsx)(t.a,{href:"https://fastify.dev/docs/latest/Reference/Decorators/#decorators",children:"fastify.decorate"})," to add a new function ",(0,i.jsx)(t.code,{children:"greet"})," to the Fastify instance."]}),"\n",(0,i.jsxs)(t.li,{children:["The ",(0,i.jsx)(t.code,{children:"greet"})," function uses the ",(0,i.jsx)(t.code,{children:"greeting"})," and ",(0,i.jsx)(t.code,{children:"message"})," provided as options to construct and return a greeting message."]}),"\n"]}),"\n",(0,i.jsxs)(t.h2,{id:"add-options-to-platformaticjson",children:["Add Options to ",(0,i.jsx)(t.code,{children:"platformatic.json"})]}),"\n",(0,i.jsxs)(t.p,{children:["Modify your ",(0,i.jsx)(t.code,{children:"platformatic.json"})," config file to register your new plugin along with the options set in your environment variables:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",children:'// platformatic.json\n\n{\n   "$schema": "https://schemas.platformatic.dev/@platformatic/db/1.52.0.json",\n   "db": {\n     "connectionString": "{PLT_DATABASE_URL}"\n   },\n   "watch": {\n     "ignore": [\n       "*.sqlite",\n       "*.sqlite-journal"\n     ]\n   },\n   "plugins": [\n     {\n       "path": "./plugins/greetingPlugin",\n       "options": {\n         "greeting": "{GREETING}",\n         "message": "{CUSTOM_MESSAGE}"\n       }\n     }\n   ]\n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:["Ensure that you have the variables defined in your ",(0,i.jsx)(t.code,{children:".env"})," file in the root of your Platformatic application."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-text",children:"PORT=3042\nGREETING=Hello World\nCUSTOM_MESSAGE=Welcome to the world of the backend without frictions\n"})}),"\n",(0,i.jsx)(t.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,i.jsx)(t.p,{children:"In this guide, you learnt how to use environment variables in a Platformatic application to manage configuration data securely."})]})}function u(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>r});var i=n(6540);const o={},a=i.createContext(o);function s(e){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);