"use strict";(self.webpackChunkplatformatic_oss_website=self.webpackChunkplatformatic_oss_website||[]).push([[9498],{7226:(t,e,r)=>{r.d(e,{XX:()=>I});var s=r(6540);function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function i(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var s=r.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}function a(t,e,r){return(e=i(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(t,e){if(null==t)return{};var r,s,n=function(t,e){if(null==t)return{};var r,s,n={},o=Object.keys(t);for(s=0;s<o.length;s++)r=o[s],e.indexOf(r)>=0||(n[r]=t[r]);return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)r=o[s],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}const c=["component"],h="heading",u="code_block",p="paragraph",d="blockquote",f="ordered_list",g="bullet_list",m="list_item",y="horizontal_rule",b="hard_break",v="image",k="emoji",w="bold",R="italic",j="strike",_="underline",$="code",O="link",T="styled",E="subscript",S="superscript",P="highlight",x="textStyle",C="anchor";function I(t,e={}){if("object"==typeof t&&"doc"===t.type&&Array.isArray(t.content)){const r=e.blokResolvers,n=void 0===r?{}:r,i=e.defaultBlokResolver,a=void 0===i?function(){return null}:i,h=e.nodeResolvers,u=void 0===h?{}:h,p=e.markResolvers,d=void 0===p?{}:p,f=e.textResolver,g=void 0===f?function(t){return t}:f,m=o(o({},M),u),y=o(o({},z),d);let b=0;const v=function(t){return s.isValidElement(t)?s.cloneElement(t,{key:b++}):t},k=function(t){const e=t?t.map(w).filter((function(t){return null!=t})):null;return Array.isArray(e)&&0===e.length?null:e},w=function(t){if("blok"===t.type){return t.attrs.body.map((function(t){let e=t.component,r=l(t,c);const s=n[e],o=s?s(r):a(e,r);return v(o)}))}{var e;let r;if("text"===t.type)r=g(t.text);else{const e=m[t.type];r=e?v(e(k(t.content),t.attrs)):null}return(null!==(e=t.marks)&&void 0!==e?e:[]).reduceRight((function(t,e){const r=y[e.type];return r?v(r(t,e.attrs)):t}),r)}};return k(t.content)}if("string"==typeof t){const r=e.defaultStringResolver,s=void 0===r?function(t){return t}:r,n=e.textResolver;return s((void 0===n?function(t){return t}:n)(t))}return null}const A=function(t){return function(e){return null!=e?s.createElement(t,null,e):null}},N=function(t){return function(){return s.createElement(t)}},L=function(t){return function(e){return s.createElement(t,null,e)}},M={[h]:function(t,e){return s.createElement(`h${e.level}`,null,t)},[u]:function(t,e){const r={className:e.class},n=s.createElement("code",r,t);return s.createElement("pre",null,n)},[v]:function(t,e){return s.createElement("img",e,t)},[p]:A("p"),[d]:A("blockquote"),[f]:A("ol"),[g]:A("ul"),[m]:A("li"),[y]:N("hr"),[b]:N("br"),[k]:function(t,e){if(!e)return null;const r={"data-type":"emoji","data-name":e.name,emoji:e.emoji};if(e.emoji||!e.fallbackImage)return s.createElement("span",r,e.emoji);{const t={src:e.fallbackImage,draggable:"false",loading:"lazy",align:"absmiddle",alt:e.name},n=s.createElement("img",t);return s.createElement("span",r,n)}}},z={[O]:function(t,e){const r=e?{href:"email"===e.linktype?`mailto:${e.href}`:e.href,target:e.target}:{};return s.createElement("a",r,t)},[T]:function(t,e){const r=e?{className:e.class}:{};return s.createElement("span",r,t)},[w]:L("b"),[R]:L("i"),[j]:L("s"),[_]:L("u"),[$]:L("code"),[E]:L("sub"),[S]:L("sup"),[P]:function(t,e){const r=e?{style:{backgroundColor:e.color}}:{};return s.createElement("span",r,t)},[x]:function(t,e){const r=e?.color?{style:{color:e.color}}:{};return s.createElement("span",r,t)},[C]:function(t,e){const r=e?{id:e.id}:{};return s.createElement("span",r,t)}}},6191:(t,e,r)=>{r.d(e,{Dp:()=>T,YB:()=>R,K1:()=>j,YV:()=>L,Tz:()=>M});var s=r(6540);let n=!1;const o=[],i=t=>new Promise(((e,r)=>{if(typeof window>"u"||(window.storyblokRegisterEvent=t=>{window.location!==window.parent.location?n?t():o.push(t):console.warn("You are not in Draft Mode or in the Visual Editor.")},document.getElementById("storyblok-javascript-bridge")))return;const s=document.createElement("script");s.async=!0,s.src=t,s.id="storyblok-javascript-bridge",s.onerror=t=>r(t),s.onload=t=>{o.forEach((t=>t())),n=!0,e(t)},document.getElementsByTagName("head")[0].appendChild(s)}));var a=Object.defineProperty,l=(t,e,r)=>((t,e,r)=>e in t?a(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r);function c(t){return!(t!=t||t===1/0||t===-1/0)}class h{constructor(){l(this,"isCDNUrl",((t="")=>t.indexOf("/cdn/")>-1)),l(this,"getOptionsPage",((t,e=25,r=1)=>({...t,per_page:e,page:r}))),l(this,"delay",(t=>new Promise((e=>setTimeout(e,t))))),l(this,"arrayFrom",((t=0,e)=>[...Array(t)].map(e))),l(this,"range",((t=0,e=t)=>{const r=Math.abs(e-t)||0,s=t<e?1:-1;return this.arrayFrom(r,((e,r)=>r*s+t))})),l(this,"asyncMap",(async(t,e)=>Promise.all(t.map(e)))),l(this,"flatMap",((t=[],e)=>t.map(e).reduce(((t,e)=>[...t,...e]),[]))),l(this,"escapeHTML",(function(t){const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},r=/[&<>"']/g,s=RegExp(r.source);return t&&s.test(t)?t.replace(r,(t=>e[t])):t}))}stringify(t,e,r){const s=[];for(const n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;const o=t[n],i=r?"":encodeURIComponent(n);let a;a="object"==typeof o?this.stringify(o,e?e+encodeURIComponent("["+i+"]"):i,Array.isArray(o)):(e?e+encodeURIComponent("["+i+"]"):i)+"="+encodeURIComponent(o),s.push(a)}return s.join("&")}getRegionURL(t){switch(t){case"us":return"api-us.storyblok.com";case"cn":return"app.storyblokchina.cn";case"ap":return"api-ap.storyblok.com";case"ca":return"api-ca.storyblok.com";default:return"api.storyblok.com"}}}const u=function(t,e){const r={};for(const s in t){const n=t[s];e.indexOf(s)>-1&&null!==n&&(r[s]=n)}return r},p={nodes:{horizontal_rule:()=>({singleTag:"hr"}),blockquote:()=>({tag:"blockquote"}),bullet_list:()=>({tag:"ul"}),code_block:t=>({tag:["pre",{tag:"code",attrs:t.attrs}]}),hard_break:()=>({singleTag:"br"}),heading:t=>({tag:`h${t.attrs.level}`}),image:t=>({singleTag:[{tag:"img",attrs:u(t.attrs,["src","alt","title"])}]}),list_item:()=>({tag:"li"}),ordered_list:()=>({tag:"ol"}),paragraph:()=>({tag:"p"}),emoji:t=>({tag:[{tag:"span",attrs:{"data-type":"emoji","data-name":t.attrs.name,emoji:t.attrs.emoji}}]})},marks:{bold:()=>({tag:"b"}),strike:()=>({tag:"s"}),underline:()=>({tag:"u"}),strong:()=>({tag:"strong"}),code:()=>({tag:"code"}),italic:()=>({tag:"i"}),link:t=>{if(!t.attrs)return{tag:""};const e=(new h).escapeHTML,r={...t.attrs},{linktype:s="url"}=t.attrs;if(delete r.linktype,r.href&&(r.href=e(t.attrs.href||"")),(t=>"email"===t)(s)&&(r.href=`mailto:${r.href}`),r.anchor&&(r.href=`${r.href}#${r.anchor}`,delete r.anchor),r.custom){for(const t in r.custom)r[t]=r.custom[t];delete r.custom}return{tag:[{tag:"a",attrs:r}]}},styled:t=>({tag:[{tag:"span",attrs:t.attrs}]}),subscript:()=>({tag:"sub"}),superscript:()=>({tag:"sup"}),anchor:t=>({tag:[{tag:"span",attrs:t.attrs}]}),highlight:t=>{var e;return null!=(e=t.attrs)&&e.color?{tag:[{tag:"span",attrs:{style:`background-color:${t.attrs.color};`}}]}:{tag:""}},textStyle:t=>{var e;return null!=(e=t.attrs)&&e.color?{tag:[{tag:"span",attrs:{style:`color:${t.attrs.color}`}}]}:{tag:""}}}};const d=class{constructor(t){l(this,"marks"),l(this,"nodes"),t||(t=p),this.marks=t.marks||[],this.nodes=t.nodes||[]}addNode(t,e){this.nodes[t]=e}addMark(t,e){this.marks[t]=e}render(t,e={optimizeImages:!1}){if(console.warn("Warning \u26a0\ufe0f: The RichTextResolver class is deprecated and will be removed in the next major release. Please use the `@storyblok/richtext` package instead. https://github.com/storyblok/richtext/"),t&&t.content&&Array.isArray(t.content)){let r="";return t.content.forEach((t=>{r+=this.renderNode(t)})),e.optimizeImages?this.optimizeImages(r,e.optimizeImages):r}return console.warn("The render method must receive an Object with a \"content\" field.\n\t\t\tThe \"content\" field must be an array of nodes as the type ISbRichtext.\n\t\t\tISbRichtext:\n\t\t\t\tcontent?: ISbRichtext[]\n\t\t\t\tmarks?: ISbRichtext[]\n\t\t\t\tattrs?: any\n\t\t\t\ttext?: string\n\t\t\t\ttype: string\n\t\t\t\t\n\t\t\t\tExample:\n\t\t\t\t{\n\t\t\t\t\tcontent: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontent: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext: 'Hello World',\n\t\t\t\t\t\t\t\t\ttype: 'text'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\ttype: 'paragraph'\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\ttype: 'doc'\n\t\t\t\t}"),""}optimizeImages(t,e){let r=0,s=0,n="",o="";"boolean"!=typeof e&&("number"==typeof e.width&&e.width>0&&(n+=`width="${e.width}" `,r=e.width),"number"==typeof e.height&&e.height>0&&(n+=`height="${e.height}" `,s=e.height),("lazy"===e.loading||"eager"===e.loading)&&(n+=`loading="${e.loading}" `),"string"==typeof e.class&&e.class.length>0&&(n+=`class="${e.class}" `),e.filters&&("number"==typeof e.filters.blur&&e.filters.blur>=0&&e.filters.blur<=100&&(o+=`:blur(${e.filters.blur})`),"number"==typeof e.filters.brightness&&e.filters.brightness>=-100&&e.filters.brightness<=100&&(o+=`:brightness(${e.filters.brightness})`),e.filters.fill&&(e.filters.fill.match(/[0-9A-Fa-f]{6}/g)||"transparent"===e.filters.fill)&&(o+=`:fill(${e.filters.fill})`),e.filters.format&&["webp","png","jpeg"].includes(e.filters.format)&&(o+=`:format(${e.filters.format})`),"boolean"==typeof e.filters.grayscale&&e.filters.grayscale&&(o+=":grayscale()"),"number"==typeof e.filters.quality&&e.filters.quality>=0&&e.filters.quality<=100&&(o+=`:quality(${e.filters.quality})`),e.filters.rotate&&[90,180,270].includes(e.filters.rotate)&&(o+=`:rotate(${e.filters.rotate})`),o.length>0&&(o="/filters"+o))),n.length>0&&(t=t.replace(/<img/g,`<img ${n.trim()}`));const i=r>0||s>0||o.length>0?`${r}x${s}${o}`:"";return t=t.replace(/a.storyblok.com\/f\/(\d+)\/([^.]+)\.(gif|jpg|jpeg|png|tif|tiff|bmp)/g,`a.storyblok.com/f/$1/$2.$3/m/${i}`),"boolean"!=typeof e&&(e.sizes||e.srcset)&&(t=t.replace(/<img.*?src=["|'](.*?)["|']/g,(t=>{var r,s;const n=t.match(/a.storyblok.com\/f\/(\d+)\/([^.]+)\.(gif|jpg|jpeg|png|tif|tiff|bmp)/g);if(n&&n.length>0){const i={srcset:null==(r=e.srcset)?void 0:r.map((t=>{if("number"==typeof t)return`//${n}/m/${t}x0${o} ${t}w`;if("object"==typeof t&&2===t.length){let e=0,r=0;return"number"==typeof t[0]&&(e=t[0]),"number"==typeof t[1]&&(r=t[1]),`//${n}/m/${e}x${r}${o} ${e}w`}})).join(", "),sizes:null==(s=e.sizes)?void 0:s.map((t=>t)).join(", ")};let a="";return i.srcset&&(a+=`srcset="${i.srcset}" `),i.sizes&&(a+=`sizes="${i.sizes}" `),t.replace(/<img/g,`<img ${a.trim()}`)}return t}))),t}renderNode(t){const e=[];t.marks&&t.marks.forEach((t=>{const r=this.getMatchingMark(t);r&&""!==r.tag&&e.push(this.renderOpeningTag(r.tag))}));const r=this.getMatchingNode(t);return r&&r.tag&&e.push(this.renderOpeningTag(r.tag)),t.content?t.content.forEach((t=>{e.push(this.renderNode(t))})):t.text?e.push(function(t){const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},r=/[&<>"']/g,s=RegExp(r.source);return t&&s.test(t)?t.replace(r,(t=>e[t])):t}(t.text)):r&&r.singleTag?e.push(this.renderTag(r.singleTag," /")):r&&r.html?e.push(r.html):"emoji"===t.type&&e.push(this.renderEmoji(t)),r&&r.tag&&e.push(this.renderClosingTag(r.tag)),t.marks&&t.marks.slice(0).reverse().forEach((t=>{const r=this.getMatchingMark(t);r&&""!==r.tag&&e.push(this.renderClosingTag(r.tag))})),e.join("")}renderTag(t,e){return t.constructor===String?`<${t}${e}>`:t.map((t=>{if(t.constructor===String)return`<${t}${e}>`;{let r=`<${t.tag}`;if(t.attrs)for(const e in t.attrs)if(Object.prototype.hasOwnProperty.call(t.attrs,e)){const s=t.attrs[e];null!==s&&(r+=` ${e}="${s}"`)}return`${r}${e}>`}})).join("")}renderOpeningTag(t){return this.renderTag(t,"")}renderClosingTag(t){return t.constructor===String?`</${t}>`:t.slice(0).reverse().map((t=>t.constructor===String?`</${t}>`:`</${t.tag}>`)).join("")}getMatchingNode(t){const e=this.nodes[t.type];if("function"==typeof e)return e(t)}getMatchingMark(t){const e=this.marks[t.type];if("function"==typeof e)return e(t)}renderEmoji(t){if(t.attrs.emoji)return t.attrs.emoji;const e=[{tag:"img",attrs:{src:t.attrs.fallbackImage,draggable:"false",loading:"lazy",align:"absmiddle"}}];return this.renderTag(e," /")}};const f=class{constructor(t){l(this,"baseURL"),l(this,"timeout"),l(this,"headers"),l(this,"responseInterceptor"),l(this,"fetch"),l(this,"ejectInterceptor"),l(this,"url"),l(this,"parameters"),l(this,"fetchOptions"),this.baseURL=t.baseURL,this.headers=t.headers||new Headers,this.timeout=null!=t&&t.timeout?1e3*t.timeout:0,this.responseInterceptor=t.responseInterceptor,this.fetch=(...e)=>t.fetch?t.fetch(...e):fetch(...e),this.ejectInterceptor=!1,this.url="",this.parameters={},this.fetchOptions={}}get(t,e){return this.url=t,this.parameters=e,this._methodHandler("get")}post(t,e){return this.url=t,this.parameters=e,this._methodHandler("post")}put(t,e){return this.url=t,this.parameters=e,this._methodHandler("put")}delete(t,e){return this.url=t,this.parameters=e,this._methodHandler("delete")}async _responseHandler(t){const e=[],r={data:{},headers:{},status:0,statusText:""};204!==t.status&&await t.json().then((t=>{r.data=t}));for(const s of t.headers.entries())e[s[0]]=s[1];return r.headers={...e},r.status=t.status,r.statusText=t.statusText,r}async _methodHandler(t){let e=`${this.baseURL}${this.url}`,r=null;if("get"===t){const t=new h;e=`${this.baseURL}${this.url}?${t.stringify(this.parameters)}`}else r=JSON.stringify(this.parameters);const s=new URL(e),n=new AbortController,{signal:o}=n;let i;this.timeout&&(i=setTimeout((()=>n.abort()),this.timeout));try{const e=await this.fetch(`${s}`,{method:t,headers:this.headers,body:r,signal:o,...this.fetchOptions});this.timeout&&clearTimeout(i);const n=await this._responseHandler(e);return this.responseInterceptor&&!this.ejectInterceptor?this._statusHandler(this.responseInterceptor(n)):this._statusHandler(n)}catch(a){return{message:a}}}setFetchOptions(t={}){Object.keys(t).length>0&&"method"in t&&delete t.method,this.fetchOptions={...t}}eject(){this.ejectInterceptor=!0}_statusHandler(t){const e=/20[0-6]/g;return new Promise(((r,s)=>{if(e.test(`${t.status}`))return r(t);s({message:t.statusText,status:t.status,response:Array.isArray(t.data)?t.data[0]:t.data.error||t.data.slug})}))}},g="SB-Agent",m="SB-JS-CLIENT",y="SB-Agent-Version",b="6.0.0";let v={};const k={};class w{constructor(t,e){l(this,"client"),l(this,"maxRetries"),l(this,"retriesDelay"),l(this,"throttle"),l(this,"accessToken"),l(this,"cache"),l(this,"helpers"),l(this,"resolveCounter"),l(this,"relations"),l(this,"links"),l(this,"richTextResolver"),l(this,"resolveNestedRelations"),l(this,"stringifiedStoriesCache");let r=t.endpoint||e;if(!r){const e=(new h).getRegionURL,s=!1===t.https?"http":"https";r=t.oauthToken?`${s}://${e(t.region)}/v1`:`${s}://${e(t.region)}/v2`}const s=new Headers;s.set("Content-Type","application/json"),s.set("Accept","application/json"),t.headers&&("Headers"===t.headers.constructor.name?t.headers.entries().toArray():Object.entries(t.headers)).forEach((([t,e])=>{s.set(t,e)})),s.has(g)||(s.set(g,m),s.set(y,b));let n=5;t.oauthToken&&(s.set("Authorization",t.oauthToken),n=3),t.rateLimit&&(n=t.rateLimit),t.richTextSchema?this.richTextResolver=new d(t.richTextSchema):this.richTextResolver=new d,t.componentResolver&&this.setComponentResolver(t.componentResolver),this.maxRetries=t.maxRetries||10,this.retriesDelay=300,this.throttle=function(t,e,r){if(!c(e))throw new TypeError("Expected `limit` to be a finite number");if(!c(r))throw new TypeError("Expected `interval` to be a finite number");const s=[];let n=[],o=0;const i=function(){o++;const e=setTimeout((function(){o--,s.length>0&&i(),n=n.filter((function(t){return t!==e}))}),r);n.indexOf(e)<0&&n.push(e);const a=s.shift();a.resolve(t.apply(a.self,a.args))},a=function(...t){const r=this;return new Promise((function(n,a){s.push({resolve:n,reject:a,args:t,self:r}),o<e&&i()}))};return a.abort=function(){n.forEach(clearTimeout),n=[],s.forEach((function(t){t.reject((function(){Error.call(this,"Throttled function aborted"),this.name="AbortError"}))})),s.length=0},a}(this.throttledRequest,n,1e3),this.accessToken=t.accessToken||"",this.relations={},this.links={},this.cache=t.cache||{clear:"manual"},this.helpers=new h,this.resolveCounter=0,this.resolveNestedRelations=t.resolveNestedRelations||!0,this.stringifiedStoriesCache={},this.client=new f({baseURL:r,timeout:t.timeout||0,headers:s,responseInterceptor:t.responseInterceptor,fetch:t.fetch})}setComponentResolver(t){this.richTextResolver.addNode("blok",(e=>{let r="";return e.attrs.body&&e.attrs.body.forEach((e=>{r+=t(e.component,e)})),{html:r}}))}parseParams(t){return t.token||(t.token=this.getToken()),t.cv||(t.cv=k[t.token]),Array.isArray(t.resolve_relations)&&(t.resolve_relations=t.resolve_relations.join(",")),typeof t.resolve_relations<"u"&&(t.resolve_level=2),t}factoryParamOptions(t,e){return this.helpers.isCDNUrl(t)?this.parseParams(e):e}makeRequest(t,e,r,s,n){const o=this.factoryParamOptions(t,this.helpers.getOptionsPage(e,r,s));return this.cacheResponse(t,o,void 0,n)}get(t,e,r){e||(e={});const s=`/${t}`,n=this.factoryParamOptions(s,e);return this.cacheResponse(s,n,void 0,r)}async getAll(t,e,r,s){const n=(null==e?void 0:e.per_page)||25,o=`/${t}`,i=o.split("/"),a=r||i[i.length-1],l=await this.makeRequest(o,e,n,1,s),c=l.total?Math.ceil(l.total/n):1,h=await this.helpers.asyncMap(this.helpers.range(1,c),(t=>this.makeRequest(o,e,n,t+1,s)));return this.helpers.flatMap([l,...h],(t=>Object.values(t.data[a])))}post(t,e,r){const s=`/${t}`;return Promise.resolve(this.throttle("post",s,e,r))}put(t,e,r){const s=`/${t}`;return Promise.resolve(this.throttle("put",s,e,r))}delete(t,e,r){const s=`/${t}`;return Promise.resolve(this.throttle("delete",s,e,r))}getStories(t,e){return this._addResolveLevel(t),this.get("cdn/stories",t,e)}getStory(t,e,r){return this._addResolveLevel(e),this.get(`cdn/stories/${t}`,e,r)}getToken(){return this.accessToken}ejectInterceptor(){this.client.eject()}_addResolveLevel(t){typeof t.resolve_relations<"u"&&(t.resolve_level=2)}_cleanCopy(t){return JSON.parse(JSON.stringify(t))}_insertLinks(t,e,r){const s=t[e];s&&"multilink"==s.fieldtype&&"story"==s.linktype&&"string"==typeof s.id&&this.links[r][s.id]?s.story=this._cleanCopy(this.links[r][s.id]):s&&"story"===s.linktype&&"string"==typeof s.uuid&&this.links[r][s.uuid]&&(s.story=this._cleanCopy(this.links[r][s.uuid]))}getStoryReference(t,e){return this.relations[t][e]?(this.stringifiedStoriesCache[e]||(this.stringifiedStoriesCache[e]=JSON.stringify(this.relations[t][e])),JSON.parse(this.stringifiedStoriesCache[e])):e}_insertRelations(t,e,r,s){r.indexOf(`${t.component}.${e}`)>-1&&("string"==typeof t[e]?t[e]=this.getStoryReference(s,t[e]):Array.isArray(t[e])&&(t[e]=t[e].map((t=>this.getStoryReference(s,t))).filter(Boolean)))}iterateTree(t,e,r){const s=t=>{if(null!=t)if(t.constructor===Array)for(let e=0;e<t.length;e++)s(t[e]);else if(t.constructor===Object){if(t._stopResolving)return;for(const n in t)(t.component&&t._uid||"link"===t.type)&&(this._insertRelations(t,n,e,r),this._insertLinks(t,n,r)),s(t[n])}};s(t.content)}async resolveLinks(t,e,r){let s=[];if(t.link_uuids){const r=t.link_uuids.length,n=[],o=50;for(let e=0;e<r;e+=o){const s=Math.min(r,e+o);n.push(t.link_uuids.slice(e,s))}for(let t=0;t<n.length;t++)(await this.getStories({per_page:o,language:e.language,version:e.version,by_uuids:n[t].join(",")})).data.stories.forEach((t=>{s.push(t)}))}else s=t.links;s.forEach((t=>{this.links[r][t.uuid]={...t,_stopResolving:!0}}))}async resolveRelations(t,e,r){let s=[];if(t.rel_uuids){const r=t.rel_uuids.length,n=[],o=50;for(let e=0;e<r;e+=o){const s=Math.min(r,e+o);n.push(t.rel_uuids.slice(e,s))}for(let t=0;t<n.length;t++)(await this.getStories({per_page:o,language:e.language,version:e.version,by_uuids:n[t].join(","),excluding_fields:e.excluding_fields})).data.stories.forEach((t=>{s.push(t)}))}else s=t.rels;s&&s.length>0&&s.forEach((t=>{this.relations[r][t.uuid]={...t,_stopResolving:!0}}))}async resolveStories(t,e,r){var s,n;let o=[];if(this.links[r]={},this.relations[r]={},typeof e.resolve_relations<"u"&&e.resolve_relations.length>0&&("string"==typeof e.resolve_relations&&(o=e.resolve_relations.split(",")),await this.resolveRelations(t,e,r)),e.resolve_links&&["1","story","url","link"].indexOf(e.resolve_links)>-1&&(null!=(s=t.links)&&s.length||null!=(n=t.link_uuids)&&n.length)&&await this.resolveLinks(t,e,r),this.resolveNestedRelations)for(const i in this.relations[r])this.iterateTree(this.relations[r][i],o,r);t.story?this.iterateTree(t.story,o,r):t.stories.forEach((t=>{this.iterateTree(t,o,r)})),this.stringifiedStoriesCache={},delete this.links[r],delete this.relations[r]}async cacheResponse(t,e,r,s){const n=this.helpers.stringify({url:t,params:e}),o=this.cacheProvider();if("auto"===this.cache.clear&&"draft"===e.version&&await this.flushCache(),"published"===e.version&&"/cdn/spaces/me"!=t){const t=await o.get(n);if(t)return Promise.resolve(t)}return new Promise((async(i,a)=>{var l;try{const r=await this.throttle("get",t,e,s);if(200!==r.status)return a(r);let c={data:r.data,headers:r.headers};if(null!=(l=r.headers)&&l["per-page"]&&(c=Object.assign({},c,{perPage:r.headers["per-page"]?parseInt(r.headers["per-page"]):0,total:r.headers["per-page"]?parseInt(r.headers.total):0})),c.data.story||c.data.stories){const t=this.resolveCounter=++this.resolveCounter%1e3;await this.resolveStories(c.data,e,`${t}`)}return"published"===e.version&&"/cdn/spaces/me"!=t&&await o.set(n,c),c.data.cv&&e.token&&("draft"===e.version&&k[e.token]!=c.data.cv&&await this.flushCache(),k[e.token]=e.cv?e.cv:c.data.cv),i(c)}catch(c){if(c.response&&429===c.status&&(r=typeof r>"u"?0:r+1)<this.maxRetries)return console.log(`Hit rate limit. Retrying in ${this.retriesDelay/1e3} seconds.`),await this.helpers.delay(this.retriesDelay),this.cacheResponse(t,e,r).then(i).catch(a);a(c)}}))}throttledRequest(t,e,r,s){return this.client.setFetchOptions(s),this.client[t](e,r)}cacheVersions(){return k}cacheVersion(){return k[this.accessToken]}setCacheVersion(t){this.accessToken&&(k[this.accessToken]=t)}clearCacheVersion(){this.accessToken&&(k[this.accessToken]=0)}cacheProvider(){switch(this.cache.type){case"memory":return{get:t=>Promise.resolve(v[t]),getAll:()=>Promise.resolve(v),set:(t,e)=>(v[t]=e,Promise.resolve(void 0)),flush:()=>(v={},Promise.resolve(void 0))};case"custom":if(this.cache.custom)return this.cache.custom;default:return{get:()=>Promise.resolve(),getAll:()=>Promise.resolve(void 0),set:()=>Promise.resolve(void 0),flush:()=>Promise.resolve(void 0)}}}async flushCache(){return await this.cacheProvider().flush(),this.clearCacheVersion(),this}}const R=(t={})=>{const{apiOptions:e}=t;if(e.accessToken)return{storyblokApi:new w(e)};console.error("You need to provide an access token to interact with Storyblok API. Read https://www.storyblok.com/docs/api/content-delivery#topics/authentication")},j=t=>{if("object"!=typeof t||typeof t._editable>"u")return{};try{const e=JSON.parse(t._editable.replace(/^<!--#storyblok#/,"").replace(/-->$/,""));return e?{"data-blok-c":JSON.stringify(e),"data-blok-uid":e.id+"-"+e.uid}:{}}catch{return{}}};let _,$="https://app.storyblok.com/f/storyblok-v2-latest.js";const O=(t,e)=>{t.addNode("blok",(t=>{let r="";return t.attrs.body.forEach((t=>{r+=e(t.component,t)})),{html:r}}))},T=(0,s.forwardRef)((({blok:t,...e},r)=>{if(!t)return console.error("Please provide a 'blok' property to the StoryblokComponent"),s.createElement("div",null,"Please provide a blok property to the StoryblokComponent");const n=I(t.component);if(n)return s.createElement(n,{ref:r,blok:t,...e});if(A()){const r=N();return r?s.createElement(r,{blok:t,...e}):s.createElement(s.Fragment,null,s.createElement("p",null,"Component could not be found for blok"," ",s.createElement("strong",null,t.component),"! Is it configured correctly?"))}return s.createElement("div",null)}));T.displayName="StoryblokComponent";let E=null,S={},P=!1,x=null;const C=()=>(E||console.error("You can't use getStoryblokApi if you're not loading apiPlugin."),E),I=t=>S[t]?S[t]:(console.error(`Component ${t} doesn't exist.`),!1),A=()=>P,N=()=>x,L=(t={})=>{const{storyblokApi:e}=((t={})=>{var e,r;const{bridge:s,accessToken:n,use:o=[],apiOptions:a={},richText:l={},bridgeUrl:c}=t;a.accessToken=a.accessToken||n;const h={bridge:s,apiOptions:a};let u={};o.forEach((t=>{u={...u,...t(h)}})),c&&($=c);const p=!(typeof window>"u")&&(null==(r=null==(e=window.location)?void 0:e.search)?void 0:r.includes("_storyblok_tk"));return!1!==s&&p&&i($),_=new d(l.schema),l.resolver&&O(_,l.resolver),u})(t);E=e,S=t.components,P=t.enableFallbackComponent,x=t.customFallbackComponent},M=(t,e={},r={})=>{let[n,o]=(0,s.useState)({});const i=typeof window<"u"&&typeof window.storyblokRegisterEvent<"u",a=C();return(0,s.useEffect)((()=>{a?async function(){const{data:s}=await a.get(`cdn/stories/${t}`,e);o(s.story),i&&s.story.id&&((t,e,r={})=>{var s;const n=!(typeof window>"u")&&typeof window.storyblokRegisterEvent<"u",o=+new URL(null==(s=window.location)?void 0:s.href).searchParams.get("_storyblok")===t;if(n&&o){if(!t)return void console.warn("Story ID is not defined. Please provide a valid ID.");window.storyblokRegisterEvent((()=>{new window.StoryblokBridge(r).on(["input","published","change"],(r=>{"input"===r.action&&r.story.id===t?e(r.story):("change"===r.action||"published"===r.action)&&r.storyId===t&&window.location.reload()}))}))}})(s.story.id,(t=>o(t)),r)}():console.error("You can't use useStoryblok if you're not loading apiPlugin.")}),[t,JSON.stringify(e),a]),a?(r.resolveRelations=r.resolveRelations??e.resolve_relations,r.resolveLinks=r.resolveLinks??e.resolve_links,n):null}}}]);